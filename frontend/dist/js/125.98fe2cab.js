"use strict";(self["webpackChunkcici"]=self["webpackChunkcici"]||[]).push([[125],{9125:function(e,t,s){s.r(t),s.d(t,{default:function(){return R}});s(4114);var a=s(6768),l=s(4232),r=s(144),i=s(9325),o=s(4108),n=s(4874),c=s.n(n);const u={class:"payment-page"},m={class:"qr-title"},v={class:"qr-container"},p=["src"],f={class:"form-group"},d={for:"",class:"label"},k={class:"form-data"},g={key:0,class:"image-container"},b=["src"],y={key:1,class:"submit-container"},w={key:2,class:"alert alert-success alert-dismissible fade show",role:"alert"};var h={__name:"OrderPayment",setup(e){const t=s(5539),n=(0,r.KR)(!1),h=(0,r.KR)(!1),C=(0,r.KR)(null),L=(0,r.KR)({file:null,preview:null}),R=async()=>{const e=localStorage.getItem("token"),t=i.A.currentRoute.value,s=t.params.id;if(console.log("Route ID:",s),L.value.preview){const t={paymentScreenshot:L.value.preview},a=await(0,o.xB)(s,t,e);a?.data?.message&&(localStorage.removeItem("cartData"),c().fire({position:"bottom",icon:"success",title:"Kpay screenshot is sent successfully.",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0}),i.A.push("/home"))}else c().fire({position:"bottom",icon:"error",title:"Kpay screenshoot is required.",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,toast:!0})},_=()=>{setTimeout((()=>{n.value=!0}),3e3)},I=()=>{const e=C.value.files[0];if(e){const t=new FileReader;t.onload=t=>{L.value={file:e,preview:t.target.result}},t.readAsDataURL(e)}},S=()=>{L.value={file:null,preview:null},C.value=null};return(0,a.sV)((()=>{_()})),(e,s)=>((0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("h1",m,(0,l.v_)(e.$t("message.ScanQR")),1),(0,a.Lk)("div",v,[(0,a.Lk)("img",{src:(0,r.R1)(t),alt:"QR Code"},null,8,p)]),(0,a.Lk)("div",f,[(0,a.Lk)("label",d,(0,l.v_)(e.$t("message.paymentImage")),1),(0,a.Lk)("div",k,[(0,a.Lk)("input",{class:"form-control",style:{"margin-top":"20px"},type:"file",id:"formFile",onChange:I,ref_key:"fileInput",ref:C},null,544)])]),L.value?.preview?((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("img",{src:L.value?.preview,alt:"Image Preview",class:"image-preview"},null,8,b),(0,a.Lk)("button",{class:"remove-button",onClick:s[0]||(s[0]=e=>S())},"×")])):(0,a.Q3)("",!0),n.value?((0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("button",{class:"btn btn-primary",onClick:R},"Submit Payment")])):(0,a.Q3)("",!0),h.value?((0,a.uX)(),(0,a.CE)("div",w,[s[3]||(s[3]=(0,a.eW)(" Payment Submitted Successfully! ")),(0,a.Lk)("button",{type:"button",class:"close",onClick:s[1]||(s[1]=e=>h.value=!1),"aria-label":"Close"},s[2]||(s[2]=[(0,a.Lk)("span",{"aria-hidden":"true"},"×",-1)]))])):(0,a.Q3)("",!0)]))}},C=s(1241);const L=(0,C.A)(h,[["__scopeId","data-v-1f3b80c5"]]);var R=L},5539:function(e,t,s){e.exports=s.p+"img/test_qr.bef94f71.jpg"}}]);
//# sourceMappingURL=125.98fe2cab.js.map