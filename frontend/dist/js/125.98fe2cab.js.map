{"version":3,"file":"js/125.98fe2cab.js","mappings":"qkBAsCA,MAAMA,EAAcC,EAAQ,MAEtBC,GAAYC,EAAAA,EAAAA,KAAI,GAChBC,GAAYD,EAAAA,EAAAA,KAAI,GAChBE,GAAYF,EAAAA,EAAAA,IAAI,MAChBG,GAASH,EAAAA,EAAAA,IAAI,CACjBI,KAAM,KACNC,QAAS,OAGLC,EAAeC,UACnB,MAAMC,EAAQC,aAAaC,QAAQ,SAC7BC,EAAQC,EAAAA,EAAOC,aAAaC,MAC5BC,EAAKJ,EAAMK,OAAOD,GAExB,GADAE,QAAQC,IAAI,YAAaH,GACrBZ,EAAOW,MAAMT,QAAS,CACxB,MAAMc,EAAU,CACdC,kBAAmBjB,EAAOW,MAAMT,SAE5BgB,QAAYC,EAAAA,EAAAA,IAAaP,EAAII,EAASX,GACxCa,GAAKE,MAAMC,UACbf,aAAagB,WAAW,YAExBC,IAAAA,KAAU,CACRC,SAAU,SACVC,KAAM,UACNC,MAAO,wCACPC,mBAAmB,EACnBC,MAAO,IACPC,kBAAkB,EAClBC,OAAO,IAETrB,EAAAA,EAAOsB,KAAK,SAEhB,MACER,IAAAA,KAAU,CACRC,SAAU,SACVC,KAAM,QACNC,MAAO,gCACPC,mBAAmB,EACnBC,MAAO,IACPC,kBAAkB,EAClBC,OAAO,GAEX,EAGIE,EAAqBA,KACzBC,YAAW,KACTrC,EAAUe,OAAQ,CAAI,GACrB,IAAK,EAGJuB,EAAmBA,KACvB,MAAMjC,EAAOF,EAAUY,MAAMwB,MAAM,GAEnC,GAAIlC,EAAM,CACR,MAAMmC,EAAS,IAAIC,WAEnBD,EAAOE,OAAUC,IACfvC,EAAOW,MAAQ,CACbV,KAAMA,EACNC,QAASqC,EAAEC,OAAOC,OACnB,EAEHL,EAAOM,cAAczC,EACvB,GAGI0C,EAAcA,KAClB3C,EAAOW,MAAQ,CACbV,KAAM,KACNC,QAAS,MAEXH,EAAUY,MAAQ,IAAI,E,OAIxBiC,EAAAA,EAAAA,KAAU,KACRZ,GAAoB,I,0iCC/GtB,MAAMa,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://cici/./src/views/OrderPayment.vue","webpack://cici/./src/views/OrderPayment.vue?0b88"],"sourcesContent":["<template>\n  <div class=\"payment-page\">\n    <h1 class=\"qr-title\">{{ $t(\"message.ScanQR\") }}</h1>\n    <div class=\"qr-container\">\n      <img :src=\"qrCodeImage\" alt=\"QR Code\" />\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"\" class=\"label\">{{ $t(\"message.paymentImage\") }}</label>\n      <div class=\"form-data\">\n        <input class=\"form-control\" style=\"margin-top: 20px;\" type=\"file\" id=\"formFile\" @change=\"handleFileUpload\"\n          ref=\"fileInput\" />\n      </div>\n    </div>\n    <!-- Image Preview with \"X\" remove button -->\n    <div class=\"image-container\" v-if=\"images?.preview\">\n      <img :src=\"images?.preview\" alt=\"Image Preview\" class=\"image-preview\">\n      <button class=\"remove-button\" @click=\"removeImage()\">Ã—</button>\n    </div>\n\n    <div v-if=\"isScanned\" class=\"submit-container\">\n      <button class=\"btn btn-primary\" @click=\"handleSubmit\">Submit Payment</button>\n    </div>\n    <div v-if=\"showAlert\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\n      Payment Submitted Successfully!\n      <button type=\"button\" class=\"close\" @click=\"showAlert = false\" aria-label=\"Close\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport router from '@/router/index';\nimport { paymentOrder } from \"@/services/offset.service\";\nimport Swal from 'sweetalert2';\n\nconst qrCodeImage = require('@/assets/images/common/test_qr.jpg');\n\nconst isScanned = ref(false);\nconst showAlert = ref(false);\nconst fileInput = ref(null);\nconst images = ref({\n  file: null,\n  preview: null\n});\n\nconst handleSubmit = async () => {\n  const token = localStorage.getItem(\"token\");\n  const route = router.currentRoute.value; // Access current route\n  const id = route.params.id; // Access params like id\n  console.log('Route ID:', id); \n  if (images.value.preview) {\n    const payload = {\n      paymentScreenshot: images.value.preview\n    };\n    const res = await paymentOrder(id, payload, token);\n    if (res?.data?.message) {\n      localStorage.removeItem(\"cartData\");\n      // showAlert.value = true;\n      Swal.fire({\n        position: \"bottom\",\n        icon: \"success\",\n        title: \"Kpay screenshot is sent successfully.\",\n        showConfirmButton: false,\n        timer: 3000,\n        timerProgressBar: true,\n        toast: true\n      });\n      router.push(\"/home\");\n    }\n  } else {\n    Swal.fire({\n      position: \"bottom\",\n      icon: \"error\",\n      title: \"Kpay screenshoot is required.\",\n      showConfirmButton: false,\n      timer: 3000,\n      timerProgressBar: true,\n      toast: true\n    });\n  }\n};\n\nconst simulateQRCodeScan = () => {\n  setTimeout(() => {\n    isScanned.value = true;\n  }, 3000);\n};\n\nconst handleFileUpload = () => {\n  const file = fileInput.value.files[0];\n\n  if (file) {\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      images.value = {\n        file: file,\n        preview: e.target.result\n      };\n    };\n    reader.readAsDataURL(file); // Convert to base64\n  }\n};\n\nconst removeImage = () => {\n  images.value = {\n    file: null,\n    preview: null\n  };\n  fileInput.value = null;\n};\n\n\nonMounted(() => {\n  simulateQRCodeScan();\n});\n\n</script>\n\n<style scoped>\n.payment-page {\n  text-align: center;\n}\n\n.qr-title {\n  margin-bottom: 30px;\n}\n\n.qr-container {\n  width: 25%;\n  height: auto;\n  margin: 0 auto;\n}\n\n.qr-container img {\n  width: auto;\n  height: auto;\n}\n\n.submit-container {\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n\nbutton {\n  padding: 10px 20px;\n  font-size: 16px;\n  background-color: #5e72e4;\n  letter-spacing: -0.025rem;\n  text-transform: none;\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);\n  color: white;\n  border-radius: 0.5rem;\n  cursor: pointer;\n}\n\n.image-container {\n  position: relative;\n  display: inline-block;\n  margin-top: 30px;\n  /* margin-left: 33%; */\n}\n\n.image-preview {\n  max-width: 150px;\n  height: 150px;\n  object-fit: cover;\n  display: block;\n}\n\n.remove-button {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  background: #ff0000;\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 25px;\n  height: 25px;\n  font-size: 16px;\n  line-height: 1;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.remove-button:hover {\n  background-color: #cc0000;\n}\n</style>","import script from \"./OrderPayment.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrderPayment.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrderPayment.vue?vue&type=style&index=0&id=1f3b80c5&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1f3b80c5\"]])\n\nexport default __exports__"],"names":["qrCodeImage","require","isScanned","ref","showAlert","fileInput","images","file","preview","handleSubmit","async","token","localStorage","getItem","route","router","currentRoute","value","id","params","console","log","payload","paymentScreenshot","res","paymentOrder","data","message","removeItem","Swal","position","icon","title","showConfirmButton","timer","timerProgressBar","toast","push","simulateQRCodeScan","setTimeout","handleFileUpload","files","reader","FileReader","onload","e","target","result","readAsDataURL","removeImage","onMounted","__exports__"],"sourceRoot":""}